<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `08_generics` crate.">
    <meta name="keywords" content="rust, rustlang, rust-lang, 08_generics">

    <title>08_generics - Rust</title>

    <link rel="stylesheet" type="text/css" href="../normalize.css">
    <link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle">
    
    <link rel="stylesheet" type="text/css" href="../dark.css">
    <link rel="stylesheet" type="text/css" href="../main.css" id="themeStyle">
    <script src="../storage.js"></script>
    

    
    
</head>
<body class="rustdoc mod">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        <div class="sidebar-menu">&#9776;</div>
        
        <p class='location'>Crate 08_generics</p><div class="sidebar-elems"><p class='location'></p><script>window.sidebarCurrent = {name: '08_generics', ty: 'mod', relpath: '../'};</script></div>
    </nav>

    <div class="theme-picker">
        <button id="theme-picker" aria-label="Pick another theme!">
            <img src="../brush.svg" width="18" alt="Pick another theme!">
        </button>
        <div id="theme-choices"></div>
    </div>
    <script src="../theme.js"></script>
    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Crate <a class="mod" href=''>08_generics</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../src/08_generics/lib.rs.html#1-151' title='goto source code'>[src]</a></span></h1>
<div class='docblock'><h2 id="08-generics" class="section-header"><a href="#08-generics">08 Generics</a></h2>
<p>Welcome to eighth step of this Rust workshop.</p>
<p>This step focuses on defining abstraction over types.</p>
<h2 id="syntax" class="section-header"><a href="#syntax">Syntax</a></h2>
<p>Generic syntax was already introduced on lifetime chapter. In facts, type variable are declared between angular brackets (<code>&lt;&gt;</code>) and a single uppercase letter is generally used.</p>

<pre class="rust rust-example-rendered">
<span class="kw">struct</span> <span class="ident">Container</span><span class="op">&lt;</span><span class="ident">E</span><span class="op">&gt;</span> {
    <span class="ident">item</span>: <span class="ident">E</span>
}

<span class="kw">impl</span><span class="op">&lt;</span><span class="ident">E</span><span class="op">&gt;</span> <span class="ident">Container</span><span class="op">&lt;</span><span class="ident">E</span><span class="op">&gt;</span> {
    <span class="kw">fn</span> <span class="ident">item</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="ident">E</span> {
        <span class="kw-2">&amp;</span><span class="self">self</span>.<span class="ident">item</span>
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Astruct%20Container%3CE%3E%20%7B%0A%20%20%20%20item%3A%20E%0A%7D%0A%0Aimpl%3CE%3E%20Container%3CE%3E%20%7B%0A%20%20%20%20fn%20item(%26self)%20-%3E%20%26E%20%7B%0A%20%20%20%20%20%20%20%20%26self.item%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>
<h2 id="bounds" class="section-header"><a href="#bounds">Bounds</a></h2>
<p>Generics in Rust works similarly to C++ templates as code is compiled for each use. Thus, it permits very interesting things such as provided implementations based on which traits type variable implements. For example by using trait bounds:</p>

<pre class="rust rust-example-rendered">
<span class="kw">impl</span><span class="op">&lt;</span><span class="ident">E</span>: <span class="ident">std</span>::<span class="ident">fmt</span>::<span class="ident">Debug</span><span class="op">&gt;</span> <span class="ident">Container</span><span class="op">&lt;</span><span class="ident">E</span><span class="op">&gt;</span> {
    <span class="kw">fn</span> <span class="ident">format</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">String</span> {
        <span class="macro">format</span><span class="macro">!</span>(<span class="string">&quot;[{:?}]&quot;</span>, <span class="self">self</span>.<span class="ident">item</span>())
    }
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Astruct%20Container%3CE%3E%20%7B%20item%3A%20E%20%7D%0Aimpl%3CE%3E%20Container%3CE%3E%20%7B%20fn%20item(%26self)%20-%3E%20%26E%20%7B%20%26self.item%20%7D%20%7D%0A%0Aimpl%3CE%3A%20std%3A%3Afmt%3A%3ADebug%3E%20Container%3CE%3E%20%7B%0A%20%20%20%20fn%20format(%26self)%20-%3E%20String%20%7B%0A%20%20%20%20%20%20%20%20format!(%22%5B%7B%3A%3F%7D%5D%22%2C%20self.item())%0A%20%20%20%20%7D%0A%7D%0A%7D">Run</a></pre>
<p>Associated type may also be specified using their name and a &quot;binding&quot; style.</p>

<pre class="rust rust-example-rendered">
<span class="kw">trait</span> <span class="ident">MyTrait</span> {
    <span class="kw">type</span> <span class="ident">AssociatedType</span>;
}

<span class="kw">impl</span><span class="op">&lt;</span><span class="ident">A</span>, <span class="ident">B</span>: <span class="ident">MyTrait</span><span class="op">&lt;</span><span class="ident">AssociatedType</span><span class="op">=</span><span class="ident">A</span><span class="op">&gt;&gt;</span>  <span class="ident">MyType</span><span class="op">&lt;</span><span class="ident">A</span>, <span class="ident">B</span><span class="op">&gt;</span> { <span class="comment">/* ... */</span> }<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Astruct%20MyType%3CE%2C%20F%3E%20%7B%20foo%3A%20E%2C%20bar%3A%20F%20%7D%0Atrait%20MyTrait%20%7B%0A%20%20%20%20type%20AssociatedType%3B%0A%7D%0A%0Aimpl%3CA%2C%20B%3A%20MyTrait%3CAssociatedType%3DA%3E%3E%20%20MyType%3CA%2C%20B%3E%20%7B%20%2F*%20...%20*%2F%20%7D%0A%7D">Run</a></pre>
<h2 id="target-type" class="section-header"><a href="#target-type">Target type</a></h2>
<p>But things can be more interesting by making entire trait implementation generic. Meaning custom trait can be &quot;automatically&quot; implemented for any target type (or such matching some trait bounds).</p>

<pre class="rust rust-example-rendered">
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>)]</span> <span class="comment">//Container impl Debug if E also does</span>
<span class="kw">struct</span> <span class="ident">Container</span><span class="op">&lt;</span><span class="ident">E</span><span class="op">&gt;</span> { <span class="ident">item</span>: <span class="ident">E</span> }
<span class="kw">struct</span> <span class="ident">NonDebug</span>;

<span class="kw">trait</span> <span class="ident">Diagnostic</span> {
    <span class="kw">fn</span> <span class="ident">diagnose</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">String</span>;
}

<span class="kw">impl</span><span class="op">&lt;</span><span class="ident">E</span>: <span class="ident">std</span>::<span class="ident">fmt</span>::<span class="ident">Debug</span><span class="op">&gt;</span> <span class="ident">Diagnostic</span> <span class="kw">for</span> <span class="ident">E</span> {
    <span class="kw">fn</span> <span class="ident">diagnose</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">String</span> {
        <span class="macro">format</span><span class="macro">!</span>(<span class="string">&quot;{:?}&quot;</span>, <span class="self">self</span>)
    }
}

<span class="comment">// Ok:</span>
<span class="comment">//  - String is Debug</span>
<span class="comment">//  - so, Container also</span>
<span class="comment">//  - so, Container is Diagnostic</span>
<span class="ident">Container</span> { <span class="ident">item</span>: <span class="ident">String</span>::<span class="ident">from</span>(<span class="string">&quot;info&quot;</span>) }.<span class="ident">diagnose</span>();

<span class="comment">// Compilation error</span>
<span class="comment">// Container { item: NonDebug }.diagnose();</span><a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0A%23%5Bderive(Debug)%5D%20%2F%2FContainer%20impl%20Debug%20if%20E%20also%20does%0Astruct%20Container%3CE%3E%20%7B%20item%3A%20E%20%7D%0Astruct%20NonDebug%3B%0A%0Atrait%20Diagnostic%20%7B%0A%20%20%20%20fn%20diagnose(%26self)%20-%3E%20String%3B%0A%7D%0A%0Aimpl%3CE%3A%20std%3A%3Afmt%3A%3ADebug%3E%20Diagnostic%20for%20E%20%7B%0A%20%20%20%20fn%20diagnose(%26self)%20-%3E%20String%20%7B%0A%20%20%20%20%20%20%20%20format!(%22%7B%3A%3F%7D%22%2C%20self)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Ok%3A%0A%2F%2F%20%20-%20String%20is%20Debug%0A%2F%2F%20%20-%20so%2C%20Container%20also%0A%2F%2F%20%20-%20so%2C%20Container%20is%20Diagnostic%0AContainer%20%7B%20item%3A%20String%3A%3Afrom(%22info%22)%20%7D.diagnose()%3B%0A%0A%2F%2F%20Compilation%20error%0A%2F%2F%20Container%20%7B%20item%3A%20NonDebug%20%7D.diagnose()%3B%0A%7D">Run</a></pre>
<h2 id="where" class="section-header"><a href="#where">Where</a></h2>
<p>To make trait bounds clearer or to express more complex conditions, a <code>where</code> clause can be used.</p>

<pre class="rust rust-example-rendered">
<span class="kw">impl</span><span class="op">&lt;</span><span class="ident">A</span>: <span class="ident">Trait1</span> <span class="op">+</span> <span class="ident">Trait2</span> <span class="op">+</span> <span class="ident">Trait3</span>, <span class="ident">B</span>: <span class="ident">Trait1</span> <span class="op">+</span> <span class="ident">Trait4</span><span class="op">&gt;</span> <span class="ident">MyTrait</span><span class="op">&lt;</span><span class="ident">A</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">B</span> {}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Atrait%20MyTrait%3CA%3E%20%7B%7D%0Atrait%20Trait1%20%7B%7D%0Atrait%20Trait2%20%7B%7D%0Atrait%20Trait3%20%7B%7D%0Atrait%20Trait4%20%7B%7D%0Aimpl%3CA%3A%20Trait1%20%2B%20Trait2%20%2B%20Trait3%2C%20B%3A%20Trait1%20%2B%20Trait4%3E%20MyTrait%3CA%3E%20for%20B%20%7B%7D%0A%7D">Run</a></pre>

<pre class="rust rust-example-rendered">
<span class="comment">// Clearer</span>
<span class="kw">impl</span><span class="op">&lt;</span><span class="ident">A</span>, <span class="ident">B</span><span class="op">&gt;</span> <span class="ident">MyTrait</span><span class="op">&lt;</span><span class="ident">A</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">B</span> <span class="kw">where</span>
    <span class="ident">A</span>: <span class="ident">Trait1</span> <span class="op">+</span> <span class="ident">Trait2</span> <span class="op">+</span> <span class="ident">Trait3</span>,
    <span class="ident">B</span>: <span class="ident">Trait1</span> <span class="op">+</span> <span class="ident">Trait4</span> {}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Atrait%20MyTrait%3CA%3E%20%7B%7D%0Atrait%20Trait1%20%7B%7D%0Atrait%20Trait2%20%7B%7D%0Atrait%20Trait3%20%7B%7D%0Atrait%20Trait4%20%7B%7D%0A%2F%2F%20Clearer%0Aimpl%3CA%2C%20B%3E%20MyTrait%3CA%3E%20for%20B%20where%0A%20%20%20%20A%3A%20Trait1%20%2B%20Trait2%20%2B%20Trait3%2C%0A%20%20%20%20B%3A%20Trait1%20%2B%20Trait4%20%7B%7D%0A%7D">Run</a></pre>

<pre class="rust rust-example-rendered">
<span class="comment">// Only available with where clause</span>
<span class="kw">impl</span><span class="op">&lt;</span><span class="ident">A</span>, <span class="ident">B</span><span class="op">&gt;</span> <span class="ident">MyTrait</span><span class="op">&lt;</span><span class="ident">A</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">B</span> <span class="kw">where</span>
    <span class="ident">Container</span><span class="op">&lt;</span><span class="ident">B</span><span class="op">&gt;</span>: <span class="ident">Debug</span>,
    <span class="ident">Container</span><span class="op">&lt;</span><span class="ident">A</span><span class="op">&gt;</span>: <span class="ident">Debug</span> {}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Atrait%20MyTrait%3CE%3E%20%7B%7D%0Astruct%20Container%3CE%3E%20%7B%20item%3A%20E%20%7D%0Ause%20std%3A%3Afmt%3A%3ADebug%3B%0A%2F%2F%20Only%20available%20with%20where%20clause%0Aimpl%3CA%2C%20B%3E%20MyTrait%3CA%3E%20for%20B%20where%0A%20%20%20%20Container%3CB%3E%3A%20Debug%2C%0A%20%20%20%20Container%3CA%3E%3A%20Debug%20%7B%7D%0A%7D">Run</a></pre>
<h2 id="multiple-trait-implementions" class="section-header"><a href="#multiple-trait-implementions">Multiple trait implementions</a></h2>
<p>Finally another interesting thing with Rust generic implementation is capability of having many implementations of a single generic trait.</p>

<pre class="rust rust-example-rendered">
<span class="kw">trait</span> <span class="ident">Convert</span><span class="op">&lt;</span><span class="ident">E</span><span class="op">&gt;</span> {
    <span class="kw">fn</span> <span class="ident">convert</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">E</span>;
}

<span class="kw">impl</span> <span class="ident">Convert</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">MyType</span> {
    <span class="comment">/* ... */</span>
}
<span class="kw">impl</span> <span class="ident">Convert</span><span class="op">&lt;</span><span class="ident">Container</span><span class="op">&lt;</span><span class="ident">MyType</span><span class="op">&gt;&gt;</span> <span class="kw">for</span> <span class="ident">MyType</span> {
    <span class="comment">/* ... */</span>
}
<span class="kw">impl</span> <span class="ident">Convert</span><span class="op">&lt;</span><span class="ident">u64</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">MyType</span> {
    <span class="comment">/* ... */</span>
}

<span class="kw">let</span> <span class="ident">explicit_string</span>: <span class="ident">String</span> <span class="op">=</span> <span class="ident">my_type</span>.<span class="ident">convert</span>();
<span class="kw">let</span> <span class="ident">explicit_container</span>: <span class="ident">Container</span><span class="op">&lt;</span>_<span class="op">&gt;</span> <span class="op">=</span> <span class="ident">my_type</span>.<span class="ident">convert</span>(); <span class="comment">// Container type is inferred</span>

<span class="kw">let</span> <span class="ident">inferred</span> <span class="op">=</span> <span class="ident">my_type</span>.<span class="ident">convert</span>();
<span class="ident">consuming_u64</span>(<span class="ident">inferred</span>);<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=%23!%5Ballow(unused)%5D%0Afn%20main()%20%7B%0Astruct%20MyType%3B%0Astruct%20Container%3CE%3E%20%7B%20item%3A%20E%20%7D%0Atrait%20Convert%3CE%3E%20%7B%0A%20%20%20%20fn%20convert(%26self)%20-%3E%20E%3B%0A%7D%0A%0Aimpl%20Convert%3CString%3E%20for%20MyType%20%7B%0A%20%20%20%20%2F*%20...%20*%2F%0Afn%20convert(%26self)%20-%3E%20String%20%7B%20String%3A%3Afrom(%22MyType%22)%20%7D%0A%7D%0Aimpl%20Convert%3CContainer%3CMyType%3E%3E%20for%20MyType%20%7B%0A%20%20%20%20%2F*%20...%20*%2F%0Afn%20convert(%26self)%20-%3E%20Container%3CMyType%3E%20%7B%20Container%20%7B%20item%3A%20MyType%20%7D%20%7D%0A%7D%0Aimpl%20Convert%3Cu64%3E%20for%20MyType%20%7B%0A%20%20%20%20%2F*%20...%20*%2F%0Afn%20convert(%26self)%20-%3E%20u64%20%7B%2042%20%7D%0A%7D%0A%0Alet%20my_type%20%3D%20MyType%3B%0Alet%20explicit_string%3A%20String%20%3D%20my_type.convert()%3B%0Alet%20explicit_container%3A%20Container%3C_%3E%20%3D%20my_type.convert()%3B%20%2F%2F%20Container%20type%20is%20inferred%0A%0Alet%20inferred%20%3D%20my_type.convert()%3B%0Afn%20consuming_u64(val%3A%20u64)%20%7B%7D%0Aconsuming_u64(inferred)%3B%0A%7D">Run</a></pre>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt><kbd>?</kbd></dt>
                    <dd>Show this help dialog</dd>
                    <dt><kbd>S</kbd></dt>
                    <dd>Focus the search field</dd>
                    <dt><kbd>↑</kbd></dt>
                    <dd>Move up in search results</dd>
                    <dt><kbd>↓</kbd></dt>
                    <dd>Move down in search results</dd>
                    <dt><kbd>↹</kbd></dt>
                    <dd>Switch tab</dd>
                    <dt><kbd>&#9166;</kbd></dt>
                    <dd>Go to active search result</dd>
                    <dt><kbd>+</kbd></dt>
                    <dd>Expand all sections</dd>
                    <dt><kbd>-</kbd></dt>
                    <dd>Collapse all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "08_generics";
    </script>
    <script src="../main.js"></script>
    <script defer src="../search-index.js"></script>
</body>
</html>